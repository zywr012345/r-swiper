"use strict";import"./style.css";import*as e from"vue";const o=(e,o)=>{const t=e.__vccOpts||e;for(const[e,n]of o)t[e]=n;return t},t=o=>(e.pushScopeId("data-v-e030df06"),o=o(),e.popScopeId(),o),n=[t(()=>e.createElementVNode("div",{class:"iconfont icon-yuyinjiantou"},null,-1))],s=[t(()=>e.createElementVNode("div",{class:"iconfont icon-yuyinjiantou"},null,-1))],d={key:0,class:"indicator-box"},l=["onClick"],i=o(Object.assign({name:"rSwiper"},{__name:"swiper",props:{fast:{type:Boolean,default:!1},autoPlay:{type:Boolean,default:!0},playTime:{type:[Number,String],default:5e3},speed:{type:Number,default:500},therehold:{type:[Number,String],default:100},slide:{type:Number,default:0},indicator:{type:Boolean,default:!0},indicatorFlash:{type:Boolean,default:!0},noMove:{type:String,default:"cs"},mobile:{type:Boolean,default:!1},vLock:{default:!1}},emits:["loadEnd","transitionend"],setup(o,{expose:t,emit:i}){const a=o;function r(e){return Array.prototype.slice.call(e)}const c=e.reactive({noMove:!1,pSlide:0,be:null,dim:!1,dst:0,drd:0,dsw:0,ds:null,dsn:0,drsn:0,dc:0,dt:null,pos:{sx:0,mx:0,ex:0,sy:0,my:0,l:0,d:0},moving:!1,u:!1,A:"",mousedown:!1,I:!1,v:!1,x:!1});let u=e.ref(null);function p(){c.dt&&clearTimeout(c.dt),c.dt=null,c.dt=setTimeout(()=>{c.moving=!0,c.u=!1,f(a.speed),m(-(c.dsw+Math.abs(b())+u.value.parentNode.getBoundingClientRect().left))},+a.playTime)}function m(e){u.value.style.transform="translate3d("+e+"px, 0, 0)"}function f(e){u.value.style.transitionDuration=e+"ms"}function v(){let e=Math.round(Math.abs(b())/c.dsw);c.dc=e-1}function g(){c.moving=!0,e.nextTick(()=>{setTimeout(()=>{f(0),v();let e=c.dc+1;e>=c.dsn-1?(m(-c.dsw),c.dc=0):0===e&&(m(-c.dsw*(c.dsn-2)),c.dc=c.dsn-3),i("transitionend",c.dc),c.moving=!1,a.autoPlay&&p()},0)})}function h(e){if(-1!==e.target.className.indexOf(a.noMove)||c.I)c.noMove=!0;else if(c.noMove=!1,!c.moving&&!c.v){if("mousedown"===e.type)c.mousedown=!0,c.pos.sx=e.pageX,c.pos.l=b(),clearTimeout(c.dt),f(0);else{c.A=r(e.changedTouches)[0].identifier;let o=e.touches.length-1;clearTimeout(c.dt),f(0),c.u=!0,c.pos.sx=e.touches[o].clientX,c.pos.sy=e.touches[o].clientY,c.pos.l=b()}a.fast&&(c.dst=new Date)}}function y(e){if(c.mousedown||c.u){if(c.noMove||c.I)return;if(!c.moving&&!c.v)if("mousemove"===e.type)c.mousedown&&(c.pos.mx=e.pageX,c.pos.d=c.pos.mx-c.pos.sx,m(c.pos.l+c.pos.d),v());else if(c.u){let o=e.touches.length-1;c.pos.mx=e.touches[o].clientX,c.pos.d=c.pos.mx-c.pos.sx,c.x||Math.abs(e.touches[o].clientY-c.pos.sy)<Math.abs(c.pos.d)?(c.v=!1,c.x=!0):(c.v=!0,c.x=!1,c.moving=!1),c.x&&(c.v=!1,c.x=!0,m(c.pos.l+c.pos.d),v())}}}function w(e){if(c.noMove||c.I||c.v)c.v=!1;else if(c.x=!1,!c.moving)if(a.fast&&(c.dst=new Date-c.dst),"mouseup"===e.type)c.mousedown&&(c.mousedown=!1,c.pos.ex=e.pageX,c.pos.d=c.pos.ex-c.pos.sx,x());else{let o=r(e.changedTouches)[0].identifier;!c.moving&&c.u&&o==c.A&&(c.u=!1,c.pos.ex=e.changedTouches[0].clientX,c.pos.d=c.pos.ex-c.pos.sx,x())}}function x(){v(),c.drd=a.fast&&c.dst<a.speed?c.dst:a.speed,f(c.drd);let e=Math.abs(b())%c.dsw,o=[],t="";if(o=b()>0?[e,c.dsw-e]:[c.dsw-e,e],"none"==(t=c.pos.d>0?"to-right":c.pos.d<0?"to-left":"none")&&a.autoPlay&&p(),"to-right"===t)if(c.moving=!0,o[0]>+a.therehold){m(b()+o[1]);let e=(b()+o[1])/c.dsw;0===Math.abs(e)&&(c.u=!1)}else m(b()-o[0]);if("to-left"===t)if(c.moving=!0,o[1]>+a.therehold){m(b()-o[0]);let e=(b()-o[0])/c.dsw;Math.abs(e)===c.dsn-1&&(c.u=!1)}else m(b()+o[1]);c.noMove=!1}function b(){return u.value.getBoundingClientRect().left}function k(e){if(!c.moving){let o=Math.round(Math.abs(b())/c.dsw);if(e>c.dsn-2-1||e<0||o==e+1)return;c.moving=!0,clearTimeout(c.dt),f(a.speed),m(-c.dsw*(e+1))}}function B(){S(!0)}function M(){S(!1)}function S(e){a.fast&&(c.drd=new Date-c.be,c.drd=c.drd<a.speed?c.drd:a.speed,c.be=new Date),c.moving||(clearTimeout(c.dt),c.moving=!0,f(c.drd),m(e?b()+c.dsw:b()-c.dsw))}function T(e){a.vLock&&e.preventDefault()}function E(e){return e===c.dc||e+c.drsn===c.dc||e-c.drsn===c.dc}return c.drd={...a}.speed,c.pSlide={...a}.slide,c.dim=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e.onMounted(()=>{e.nextTick(()=>{c.dsw=u.value.getBoundingClientRect().width,c.ds=r(u.value.children),c.drsn=c.ds.length,c.dsn=c.ds.length,1===c.drsn?c.I=!0:function(){let e=c.ds[0].cloneNode(c.ds[0],!0),o=c.ds[c.dsn-1].cloneNode(c.ds[c.dsn-1],!0);u.value.appendChild(e),u.value.insertBefore(o,c.ds[0]),c.ds=r(u.value.children),c.dsn=c.ds.length,function(){if(c.pSlide<0||c.pSlide>c.dsn-2-1)throw new Error("[r-swiper:Error]: You set an abnormal subscript, please check and reassign: slide"+c.pSlide);m(-c.dsw*(c.pSlide+1)),a.autoPlay&&p(),i("loadEnd"),console.log("%c 🚀 ~ 我写的代码 像诗一样优雅 ","background: linear-gradient(to right, orange, yellow, green, skyblue, indigo, violet, #471290); color: white; font-size: 16px;")}()}()})}),t({go:S,next:M,prev:B,slideTo:k}),(t,i)=>(e.openBlock(),e.createElementBlock("div",{class:"r-swiper-style",style:e.normalizeStyle({"--speed":c.drd+"ms"}),onTouchmove:T},[e.createElementVNode("div",{class:"r-swiper-box",ref_key:"swiper",ref:u,onTransitionend:g,onTouchstart:h,onMousedown:h,onTouchmove:y,onMousemove:y,onTouchend:w,onMouseup:w},[e.renderSlot(t.$slots,"default",{},void 0,!0)],544),e.renderSlot(t.$slots,"leftBtn",{},()=>[a.mobile||c.dim?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"btn-box left-btn",onClick:B},n))],!0),e.renderSlot(t.$slots,"rightBtn",{},()=>[a.mobile||c.dim?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"btn-box",onClick:M},s))],!0),e.renderSlot(t.$slots,"indicator",{},()=>[a.indicator?(e.openBlock(),e.createElementBlock("div",d,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.drsn,(t,n)=>(e.openBlock(),e.createElementBlock("div",{onClick:e=>k(n),key:n,class:e.normalizeClass(["dot",{"dot-pc":!c.dim,"dot-active":E(n),flash:o.indicatorFlash&&E(n)}])},null,10,l))),128))])):e.createCommentVNode("",!0)],!0),e.renderSlot(t.$slots,"all",{},void 0,!0)],36))}}),[["__scopeId","data-v-e030df06"]]),a={class:"r-slide-style"},r=Object.assign({name:"rSlide"},{__name:"slide",setup:o=>(o,t)=>(e.openBlock(),e.createElementBlock("div",a,[e.renderSlot(o.$slots,"default")]))}),R=e=>{e.component(i.name,i),e.component(r.name,r)};export default R;export{r as rSlide,i as rSwiper};